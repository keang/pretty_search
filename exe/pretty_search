#!/usr/bin/env ruby
require 'pretty_search'
require 'cli_options'

options = begin
            CliOptions.parse_cli_opts
          rescue GetoptLong::Error
            abort
          end
if options[:help]
  puts CliOptions::HELP_TEXT
  return
end

query = begin
          CliOptions.parse_query(ARGV)
        rescue => e
          abort e.message
        end
PrettySearch.run(query, **options)
